# webcrm-connector

Note that the AccessToken only last one hours, so one needs to update the `api_key` often until we support this style of auth in the core.

```
$ curl -X POST https://api.webcrm.com/Auth/Apilogin -d 'Authcode=402f1c48-3b4e-[..]-dc2841fa6b76' | jq .
{
  "AccessToken": "uGNiDybZCn7ObzEzgu_p[..]I_2JEU5XqaK-oBknYo",
  "RefreshToken": "fhRpZ9bw1x7BUTsNeZZn[..]Zv2oLPVXB_cxpRt-dC0",
  "Error": null,
  "ErrorDescription": null,
  "IsError": false,
  "ExpiresIn": 3600,
  "TokenType": "Bearer",
  "SystemId": 39329
}

$ curl -H "Authorization: bearer uGNiDybZCn7ObzEzgu_p[..]I_2JEU5XqaK-oBknYo" https://api.webcrm.com/Persons?size=1 | jq .
[
  {
    "PersonBirthday": "0001-01-01T00:00:00+00:00",
    "PersonBlockMassEmail": true,
    "PersonBlockMassEmail2": false,
    "PersonCampaignPassword": "(censored)",
    "PersonCampaignWrongPasswordCount": 0,
    "PersonCheckMark1": false,
    "PersonCheckMark2": false,
    "PersonCheckMark3": false,
    "PersonCheckMark4": false,
    "PersonCheckMark5": false,
    "PersonCheckMark6": false,
    "PersonCheckMark7": false,
    "PersonCheckMark8": false,
    "PersonCheckMark9": false,
    "PersonCheckMark10": false,
    "PersonComment": "",
    "PersonCreatedAt": "2015-12-13T12:17:47+00:00",
    "PersonCreatedBy": "webCRM System",
    "PersonDirectPhone": "",
    "PersonEmail": "support@efficy.com",
    "PersonEmail2": "",
    "PersonEmailBounces": false,
    "PersonEmail2Bounces": false,
    "PersonFirstName": "webCRM",
    "PersonId": 2,
    "PersonImageFileExtension": "",
    "PersonLastLoginDateTime": null,
    "PersonLastName": "Support",
    "PersonLoginLog": "",
    "PersonMarketDateId": "",
    "PersonMarketDataId": "",
    "PersonMarketDataProviderId": 0,
    "PersonMemberGroupId": null,
    "PersonMemberLanguageId": null,
    "PersonMemberNumber": null,
    "PersonMemberPassword": null,
    "PersonMemberStartDate": null,
    "PersonMemberStatusId": null,
    "PersonMemberWrongPasswordCount": null,
    "PersonMiddleName": "",
    "PersonMobilePhone": "94093333",
    "PersonName": "webCRM Support",
    "PersonHistory": "",
    "PersonOrganisationId": 1,
    "PersonPassword": "(censored)",
    "PersonSalutation": "",
    "PersonSkype": "",
    "PersonSortOrder": 0,
    "PersonStatus": "Active",
    "PersonSupportLanguageId": 0,
    "PersonTelephoneSearch": "--94093333",
    "PersonTitle": "",
    "PersonUpdatedAt": "2022-08-11T08:45:34+01:00",
    "PersonUpdatedBy": "webCRM System",
    "PersonPlus1": null,
    "PersonPlus2": null,
    "PersonPlus3": null,
    "PersonPlus4": null,
    "PersonPlus5": null,
    "PersonPlus6": null,
    "PersonPlus7": null,
    "PersonPlus8": null,
    "PersonPlus9": null,
    "PersonPlus10": null,
    "PersonPlus11": null,
    "PersonPlus12": null,
    "PersonPlus13": null,
    "PersonPlus14": null,
    "PersonPlus15": null,
    "PersonPlus16": null,
    "PersonPlus17": null,
    "PersonPlus18": null,
    "PersonPlus19": null,
    "PersonPlus20": null,
    "PersonCustom1": "--Velg--",
    "PersonCustom2": "Innehavere",
    "PersonCustom3": "",
    "PersonCustom4": "[]",
    "PersonCustom5": "",
    "PersonCustom6": "",
    "PersonCustom7": "",
    "PersonCustom8": "",
    "PersonCustom9": "",
    "PersonCustom10": "",
    "PersonCustom11": "",
    "PersonCustom12": "",
    "PersonCustom13": "",
    "PersonCustom14": "",
    "PersonCustom15": "",
    "PersonMemo": ""
  }
]
```
